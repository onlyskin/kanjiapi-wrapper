(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const ERROR="ERROR",SUCCESS="SUCCESS",LOADING="LOADING",KANJI_PATH="kanji",READING_PATH="reading",WORDS_PATH="words",API_VERSION="v1";class ApiWrapper{constructor(a,b){this._fetch=a,this._apiUrl=b,this._listeners=new Map,this._cache=new Map,this._pending=new Set}addListener(a,b){this._listeners.set(a,b)}removeListener(a){this._listeners.delete(a)}getKanji(a){return this._fromCache(`/${KANJI_PATH}/${a}`)}getReading(a){return this._fromCache(`/${READING_PATH}/${a}`)}getJoyoSet(){return this._asSet(this._fromCache(`/${KANJI_PATH}/joyo`))}getJinmeiyoSet(){return this._asSet(this._fromCache(`/${KANJI_PATH}/jinmeiyo`))}getListForGrade(a){return this._asSet(this._fromCache(`/${KANJI_PATH}/grade-${a}`))}getWordsForKanji(a){return this._fromCache(`/${WORDS_PATH}/${a}`)}getUrl(a){return this._fromCache(a)}_fromCache(a){return this._cache.has(a)?this._cache.get(a):(this._pending.has(a)||this._apiFetch(a),{status:LOADING,value:null})}async _apiFetch(a){this._pending.add(a);const b=await this._fetch(`${this._apiUrl}/${API_VERSION}${a}`);this._cache=this._cache.set(a,{status:200===b.status?SUCCESS:ERROR,value:200===b.status?await b.json():b.status});for(const b of this._listeners.values())b()}_asSet(a){return a.status===SUCCESS?{status:a.status,value:new Set(a.value)}:a}}module.exports={ApiWrapper,ERROR:"ERROR",SUCCESS,LOADING};
},{}],2:[function(require,module,exports){
const{ApiWrapper,ERROR,SUCCESS,LOADING}=require("./api_wrapper"),API_URL="https://kanjiapi.dev";Kanjiapi={build:()=>new ApiWrapper(window.fetch.bind(window),API_URL),ERROR,SUCCESS,LOADING},module.exports={Kanjiapi};
},{"./api_wrapper":1}],3:[function(require,module,exports){
"use strict";var{Kanjiapi}=require("./kanjiapi-wrapper.js");"undefined"==typeof module?window.Kanjiapi=Kanjiapi:module.exports={Kanjiapi};
},{"./kanjiapi-wrapper.js":2}]},{},[3]);
